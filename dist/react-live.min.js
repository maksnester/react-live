!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types"),require("react-simple-code-editor"),require("prism-react-renderer"),require("buble"),require("core-js/features/object/assign")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-simple-code-editor","prism-react-renderer","buble","core-js/features/object/assign"],t):t(e.ReactLive={},e.React,e.propTypes,e.Editor,e.Prism,e.Buble,e.assign)}(this,function(e,t,n,r,o,i,a){"use strict";function s(e){return u.createElement(E.Consumer,null,function(t){var n=t.code,r=t.language,o=t.theme,i=t.disabled,a=t.onChange;return u.createElement(C,h({theme:o,code:n,language:r,disabled:i,onChange:a},e))})}function l(e){return u.createElement(E.Consumer,null,function(t){var n=t.error;return n?u.createElement("pre",e,n):null})}function c(e){var t=e.Component,n=v(e,["Component"]);return u.createElement(t,n,u.createElement(E.Consumer,null,function(e){var t=e.element;return t&&u.createElement(t,null)}))}function p(e){return function(t){function n(){return m(this,n),b(this,t.apply(this,arguments))}return g(n,t),n.prototype.render=function(){var t=this;return u.createElement(E.Consumer,null,function(n){return u.createElement(e,h({live:n},t.props))})},n}(t.Component)}var u="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var d="default"in o?o.default:o;a=a&&a.hasOwnProperty("default")?a.default:a;var f={plain:{color:"#C5C8C6",backgroundColor:"#1D1F21"},styles:[{types:["prolog","comment","doctype","cdata"],style:{color:"hsl(30, 20%, 50%)"}},{types:["property","tag","boolean","number","constant","symbol"],style:{color:"hsl(350, 40%, 70%)"}},{types:["attr-name","string","char","builtin","insterted"],style:{color:"hsl(75, 70%, 60%)"}},{types:["operator","entity","url","string","variable","language-css"],style:{color:"hsl(40, 90%, 60%)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["regex","important"],style:{color:"#e90"}},{types:["atrule","attr-value","keyword"],style:{color:"hsl(350, 40%, 70%)"}},{types:["punctuation","symbol"],style:{opacity:"0.7"}}]},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},C=function(e){function n(){var r,i,a;m(this,n);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return r=i=b(this,e.call.apply(e,[this].concat(l))),i.state={code:""},i.updateContent=function(e){i.setState({code:e},function(){i.props.onChange&&i.props.onChange(i.state.code)})},i.highlightCode=function(e){return u.createElement(d,{Prism:o.Prism,code:e,theme:i.props.theme||f,language:i.props.language},function(e){var n=e.tokens,r=e.getLineProps,o=e.getTokenProps;return u.createElement(t.Fragment,null,n.map(function(e,t){return u.createElement("div",r({line:e,key:t}),e.map(function(e,t){return u.createElement("span",o({token:e,key:t}))}))}))})},a=r,b(i,a)}return g(n,e),n.getDerivedStateFromProps=function(e,t){return e.code!==t.prevCodeProp?{code:e.code,prevCodeProp:e.code}:null},n.prototype.render=function(){var e=this.props,t=e.style,n=(e.code,e.onChange,e.language,e.theme),o=v(e,["style","code","onChange","language","theme"]),i=this.state.code,a=n&&"object"===y(n.plain)?n.plain:{};return u.createElement(r,h({value:i,padding:10,highlight:this.highlightCode,onValueChange:this.updateContent,style:h({whiteSpace:"pre",fontFamily:"monospace"},a,t)},o))},n}(t.Component),E=t.createContext({}),O={assign:a},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h({},t,{objectAssign:"_poly.assign",transforms:h({dangerousForOf:!0,dangerousTaggedTemplateString:!0},t.transforms)});return i.transform(e,n).code},P=function(e,n){return function(t){function r(){return m(this,r),b(this,t.apply(this,arguments))}return g(r,t),r.prototype.componentDidCatch=function(e){n(e)},r.prototype.render=function(){return"function"==typeof e?u.createElement(e,null):e},r}(t.Component)},w=function(e,t){var n=Object.keys(t),r=n.map(function(e){return t[e]});return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],n,[e])))).apply(void 0,[O,u].concat(r))},j=function(e,t){var n=e.code,r=void 0===n?"":n,o=e.scope,i=void 0===o?{}:o,a=e.transpileOptions,s=r.trim().replace(/;$/,""),l=S("return ("+s+")",a).trim();return P(w(l,i),t)},x=function(e,t,n){var r=e.code,o=void 0===r?"":r,i=e.scope,a=void 0===i?{}:i,s=e.transpileOptions,l=function(e){void 0===e?n(new SyntaxError("`render` must be called with valid JSX.")):t(P(e,n))};if(!/render\s*\(/.test(o))return n(new SyntaxError("No-Inline evaluations must call `render`."));w(S(o,s),h({},a,{render:l}))},I=function(e){function t(){var n,r,o;m(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=b(this,e.call.apply(e,[this].concat(a))),r.onChange=function(e){var t=r.props,n=t.scope,o=t.transformCode,i=t.noInline,a=t.transpileOptions;r.transpile({code:e,scope:n,transformCode:o,transpileOptions:a,noInline:i})},r.onError=function(e){r.setState({error:e.toString()})},r.transpile=function(e){var t=e.code,n=e.scope,o=e.transformCode,i=e.transpileOptions,a=e.noInline,s=void 0!==a&&a,l={code:o?o(t):t,scope:n,transpileOptions:i},c=function(e){return r.setState({element:void 0,error:e.toString()})},p=function(e){return r.setState(h({},u,{element:e}))},u={unsafeWrapperError:void 0,error:void 0};try{s?(r.setState(h({},u,{element:null})),x(l,p,c)):p(j(l,c))}catch(e){r.setState(h({},u,{error:e.toString()}))}},o=n,b(r,o)}return g(t,e),t.prototype.UNSAFE_componentWillMount=function(){var e=this.props,t=e.code,n=e.scope,r=e.transformCode,o=e.noInline,i=e.transpileOptions;this.transpile({code:t,scope:n,transformCode:r,noInline:o,transpileOptions:i})},t.prototype.componentDidUpdate=function(e){var t=e.code,n=e.scope,r=e.noInline,o=e.transformCode,i=e.transpileOptions,a=this.props,s=a.code,l=a.scope,c=a.noInline,p=a.transformCode,u=a.transpileOptions;s===t&&l===n&&c===r&&p===o&&u===i||this.transpile({code:s,scope:l,transformCode:p,noInline:c,transpileOptions:u})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.code,r=e.language,o=e.theme,i=e.disabled;return u.createElement(E.Provider,{value:h({},this.state,{code:n,language:r,theme:o,disabled:i,onError:this.onError,onChange:this.onChange})},t)},t}(t.Component);I.defaultProps={code:"",noInline:!1,language:"jsx",disabled:!1},c.defaultProps={Component:"div"},e.Editor=C,e.LiveProvider=I,e.LiveEditor=s,e.LiveError=l,e.LivePreview=c,e.LiveContext=E,e.withLive=p,e.generateElement=j,e.renderElementAsync=x,Object.defineProperty(e,"__esModule",{value:!0})});
